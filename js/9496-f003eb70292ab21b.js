(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9496],{9496:function(n,r,t){"use strict";t.d(r,{Z:function(){return k}});var e=t(97582),i=t(67294),a=t(77598),o=function(n,r){var t=r.manual,o=r.ready,u=void 0===o||o,c=r.defaultParams,s=void 0===c?[]:c,l=r.refreshDeps,d=void 0===l?[]:l,f=r.refreshDepsAction,v=(0,i.useRef)(!1);return v.current=!1,(0,a.Z)((function(){!t&&u&&(v.current=!0,n.run.apply(n,(0,e.__spreadArray)([],(0,e.__read)(s),!1)))}),[u]),(0,a.Z)((function(){v.current||t||(v.current=!0,f?f():n.refresh())}),(0,e.__spreadArray)([],(0,e.__read)(d),!1)),{onBefore:function(){if(!u)return{stopNow:!0}}}};o.onInit=function(n){var r=n.ready,t=void 0===r||r;return{loading:!n.manual&&t}};var u=o,c=t(8224);function s(n,r){var t=(0,i.useRef)({deps:r,obj:void 0,initialized:!1}).current;return!1!==t.initialized&&(0,c.Z)(t.deps,r)||(t.deps=r,t.obj=n(),t.initialized=!0),t.obj}var l=t(45210),d=new Map,f=new Map,v={},p=function(n,r){return v[n]||(v[n]=[]),v[n].push(r),function(){var t=v[n].indexOf(r);v[n].splice(t,1)}},h=function(n,r){var t=r.cacheKey,a=r.cacheTime,o=void 0===a?3e5:a,u=r.staleTime,c=void 0===u?0:u,h=r.setCache,_=r.getCache,y=(0,i.useRef)(),g=(0,i.useRef)(),m=function(n,r){h?h(r):function(n,r,t){var i=d.get(n);(null===i||void 0===i?void 0:i.timer)&&clearTimeout(i.timer);var a=void 0;r>-1&&(a=setTimeout((function(){d.delete(n)}),r)),d.set(n,(0,e.__assign)((0,e.__assign)({},t),{timer:a}))}(n,o,r),function(n,r){v[n]&&v[n].forEach((function(n){return n(r)}))}(n,r.data)},w=function(n,r){return void 0===r&&(r=[]),_?_(r):function(n){return d.get(n)}(n)};return s((function(){if(t){var r=w(t);r&&Object.hasOwnProperty.call(r,"data")&&(n.state.data=r.data,n.state.params=r.params,(-1===c||(new Date).getTime()-r.time<=c)&&(n.state.loading=!1)),y.current=p(t,(function(r){n.setState({data:r})}))}}),[]),(0,l.Z)((function(){var n;null===(n=y.current)||void 0===n||n.call(y)})),t?{onBefore:function(n){var r=w(t,n);return r&&Object.hasOwnProperty.call(r,"data")?-1===c||(new Date).getTime()-r.time<=c?{loading:!1,data:null===r||void 0===r?void 0:r.data,error:void 0,returnNow:!0}:{data:null===r||void 0===r?void 0:r.data,error:void 0}:{}},onRequest:function(n,r){var i=function(n){return f.get(n)}(t);return i&&i!==g.current||(i=n.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(r),!1)),g.current=i,function(n,r){f.set(n,r),r.then((function(r){return f.delete(n),r})).catch((function(){f.delete(n)}))}(t,i)),{servicePromise:i}},onSuccess:function(r,e){var i;t&&(null===(i=y.current)||void 0===i||i.call(y),m(t,{data:r,params:e,time:(new Date).getTime()}),y.current=p(t,(function(r){n.setState({data:r})})))},onMutate:function(r){var e;t&&(null===(e=y.current)||void 0===e||e.call(y),m(t,{data:r,params:n.state.params,time:(new Date).getTime()}),y.current=p(t,(function(r){n.setState({data:r})})))}}:{}},_=t(23279),y=t.n(_),g=function(n,r){var t=r.debounceWait,a=r.debounceLeading,o=r.debounceTrailing,u=r.debounceMaxWait,c=(0,i.useRef)(),s=(0,i.useMemo)((function(){var n={};return void 0!==a&&(n.leading=a),void 0!==o&&(n.trailing=o),void 0!==u&&(n.maxWait=u),n}),[a,o,u]);return(0,i.useEffect)((function(){if(t){var r=n.runAsync.bind(n);return c.current=y()((function(n){n()}),t,s),n.runAsync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Promise((function(t,i){var a;null===(a=c.current)||void 0===a||a.call(c,(function(){r.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(n),!1)).then(t).catch(i)}))}))},function(){var t;null===(t=c.current)||void 0===t||t.cancel(),n.runAsync=r}}}),[t,s]),t?{onCancel:function(){var n;null===(n=c.current)||void 0===n||n.cancel()}}:{}},m=function(n,r){var t=r.loadingDelay,e=r.ready,a=(0,i.useRef)();if(!t)return{};var o=function(){a.current&&clearTimeout(a.current)};return{onBefore:function(){return o(),!1!==e&&(a.current=setTimeout((function(){n.setState({loading:!0})}),t)),{loading:!1}},onFinally:function(){o()},onCancel:function(){o()}}},w=t(52982);function b(){return!w.Z||"hidden"!==document.visibilityState}var A=[];if(w.Z){window.addEventListener("visibilitychange",(function(){if(b())for(var n=0;n<A.length;n++){(0,A[n])()}}),!1)}var P=function(n){return A.push(n),function(){var r=A.indexOf(n);A.splice(r,1)}},Z=function(n,r){var t=r.pollingInterval,e=r.pollingWhenHidden,o=void 0===e||e,u=r.pollingErrorRetryCount,c=void 0===u?-1:u,s=(0,i.useRef)(),l=(0,i.useRef)(),d=(0,i.useRef)(0),f=function(){var n;s.current&&clearTimeout(s.current),null===(n=l.current)||void 0===n||n.call(l)};return(0,a.Z)((function(){t||f()}),[t]),t?{onBefore:function(){f()},onError:function(){d.current+=1},onSuccess:function(){d.current=0},onFinally:function(){-1===c||-1!==c&&d.current<=c?s.current=setTimeout((function(){o||b()?n.refresh():l.current=P((function(){n.refresh()}))}),t):d.current=0},onCancel:function(){f()}}:{}};var R=[];if(w.Z){var T=function(){if(b()&&(!w.Z||"undefined"===typeof navigator.onLine||navigator.onLine))for(var n=0;n<R.length;n++){(0,R[n])()}};window.addEventListener("visibilitychange",T,!1),window.addEventListener("focus",T,!1)}var S=function(n){return R.push(n),function(){var r=R.indexOf(n);r>-1&&R.splice(r,1)}},E=function(n,r){var t=r.refreshOnWindowFocus,a=r.focusTimespan,o=void 0===a?5e3:a,u=(0,i.useRef)(),c=function(){var n;null===(n=u.current)||void 0===n||n.call(u)};return(0,i.useEffect)((function(){if(t){var r=function(n,r){var t=!1;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t||(t=!0,n.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(i),!1)),setTimeout((function(){t=!1}),r))}}(n.refresh.bind(n),o);u.current=S((function(){r()}))}return function(){c()}}),[t,o]),(0,l.Z)((function(){c()})),{}},C=function(n,r){var t=r.retryInterval,e=r.retryCount,a=(0,i.useRef)(),o=(0,i.useRef)(0),u=(0,i.useRef)(!1);return e?{onBefore:function(){u.current||(o.current=0),u.current=!1,a.current&&clearTimeout(a.current)},onSuccess:function(){o.current=0},onError:function(){if(o.current+=1,-1===e||o.current<=e){var r=null!==t&&void 0!==t?t:Math.min(1e3*Math.pow(2,o.current),3e4);a.current=setTimeout((function(){u.current=!0,n.refresh()}),r)}else o.current=0},onCancel:function(){o.current=0,a.current&&clearTimeout(a.current)}}:{}},O=t(23493),H=t.n(O),j=function(n,r){var t=r.throttleWait,a=r.throttleLeading,o=r.throttleTrailing,u=(0,i.useRef)(),c={};return void 0!==a&&(c.leading=a),void 0!==o&&(c.trailing=o),(0,i.useEffect)((function(){if(t){var r=n.runAsync.bind(n);return u.current=H()((function(n){n()}),t,c),n.runAsync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Promise((function(t,i){var a;null===(a=u.current)||void 0===a||a.call(u,(function(){r.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(n),!1)).then(t).catch(i)}))}))},function(){var t;n.runAsync=r,null===(t=u.current)||void 0===t||t.cancel()}}}),[t,a,o]),t?{onCancel:function(){var n;null===(n=u.current)||void 0===n||n.cancel()}}:{}},x=t(3930),B=t(22638),M=t(78234),N=function(){var n=(0,e.__read)((0,i.useState)({}),2)[1];return(0,i.useCallback)((function(){return n({})}),[])},D=t(31663),F=t(92770),L=function(){function n(n,r,t,i){void 0===i&&(i={}),this.serviceRef=n,this.options=r,this.subscribe=t,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=(0,e.__assign)((0,e.__assign)((0,e.__assign)({},this.state),{loading:!r.manual}),i)}return n.prototype.setState=function(n){void 0===n&&(n={}),this.state=(0,e.__assign)((0,e.__assign)({},this.state),n),this.subscribe()},n.prototype.runPluginHandler=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var i=this.pluginImpls.map((function(t){var i;return null===(i=t[n])||void 0===i?void 0:i.call.apply(i,(0,e.__spreadArray)([t],(0,e.__read)(r),!1))})).filter(Boolean);return Object.assign.apply(Object,(0,e.__spreadArray)([{}],(0,e.__read)(i),!1))},n.prototype.runAsync=function(){for(var n,r,t,i,a,o,u,c,s,l,d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return(0,e.__awaiter)(this,void 0,void 0,(function(){var f,v,p,h,_,y,g,m,w,b,A;return(0,e.__generator)(this,(function(P){switch(P.label){case 0:if(this.count+=1,f=this.count,v=this.runPluginHandler("onBefore",d),p=v.stopNow,h=void 0!==p&&p,_=v.returnNow,y=void 0!==_&&_,g=(0,e.__rest)(v,["stopNow","returnNow"]),h)return[2,new Promise((function(){}))];if(this.setState((0,e.__assign)({loading:!0,params:d},g)),y)return[2,Promise.resolve(g.data)];null===(r=(n=this.options).onBefore)||void 0===r||r.call(n,d),P.label=1;case 1:return P.trys.push([1,3,,4]),(m=this.runPluginHandler("onRequest",this.serviceRef.current,d).servicePromise)||(m=(A=this.serviceRef).current.apply(A,(0,e.__spreadArray)([],(0,e.__read)(d),!1))),[4,m];case 2:return w=P.sent(),f!==this.count?[2,new Promise((function(){}))]:(this.setState({data:w,error:void 0,loading:!1}),null===(i=(t=this.options).onSuccess)||void 0===i||i.call(t,w,d),this.runPluginHandler("onSuccess",w,d),null===(o=(a=this.options).onFinally)||void 0===o||o.call(a,d,w,void 0),f===this.count&&this.runPluginHandler("onFinally",d,w,void 0),[2,w]);case 3:if(b=P.sent(),f!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:b,loading:!1}),null===(c=(u=this.options).onError)||void 0===c||c.call(u,b,d),this.runPluginHandler("onError",b,d),null===(l=(s=this.options).onFinally)||void 0===l||l.call(s,d,void 0,b),f===this.count&&this.runPluginHandler("onFinally",d,void 0,b),b;case 4:return[2]}}))}))},n.prototype.run=function(){for(var n=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this.runAsync.apply(this,(0,e.__spreadArray)([],(0,e.__read)(r),!1)).catch((function(r){n.options.onError||console.error(r)}))},n.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},n.prototype.refresh=function(){this.run.apply(this,(0,e.__spreadArray)([],(0,e.__read)(this.state.params||[]),!1))},n.prototype.refreshAsync=function(){return this.runAsync.apply(this,(0,e.__spreadArray)([],(0,e.__read)(this.state.params||[]),!1))},n.prototype.mutate=function(n){var r=(0,F.mf)(n)?n(this.state.data):n;this.runPluginHandler("onMutate",r),this.setState({data:r})},n}(),W=L;var I=function(n,r,t){void 0===r&&(r={}),void 0===t&&(t=[]);var i=r.manual,a=void 0!==i&&i,o=(0,e.__rest)(r,["manual"]);D.Z&&r.defaultParams&&!Array.isArray(r.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof r.defaultParams));var u=(0,e.__assign)({manual:a},o),c=(0,x.Z)(n),d=N(),f=s((function(){var n=t.map((function(n){var r;return null===(r=null===n||void 0===n?void 0:n.onInit)||void 0===r?void 0:r.call(n,u)})).filter(Boolean);return new W(c,u,d,Object.assign.apply(Object,(0,e.__spreadArray)([{}],(0,e.__read)(n),!1)))}),[]);return f.options=u,f.pluginImpls=t.map((function(n){return n(f,u)})),(0,M.Z)((function(){if(!a){var n=f.state.params||r.defaultParams||[];f.run.apply(f,(0,e.__spreadArray)([],(0,e.__read)(n),!1))}})),(0,l.Z)((function(){f.cancel()})),{loading:f.state.loading,data:f.state.data,error:f.state.error,params:f.state.params||[],cancel:(0,B.Z)(f.cancel.bind(f)),refresh:(0,B.Z)(f.refresh.bind(f)),refreshAsync:(0,B.Z)(f.refreshAsync.bind(f)),run:(0,B.Z)(f.run.bind(f)),runAsync:(0,B.Z)(f.runAsync.bind(f)),mutate:(0,B.Z)(f.mutate.bind(f))}};var k=function(n,r,t){return I(n,r,(0,e.__spreadArray)((0,e.__spreadArray)([],(0,e.__read)(t||[]),!1),[g,m,Z,E,j,u,h,C],!1))}},23493:function(n,r,t){var e=t(23279),i=t(13218);n.exports=function(n,r,t){var a=!0,o=!0;if("function"!=typeof n)throw new TypeError("Expected a function");return i(t)&&(a="leading"in t?!!t.leading:a,o="trailing"in t?!!t.trailing:o),e(n,r,{leading:a,maxWait:r,trailing:o})}}}]);